# Вопрос 25. Метод ветвей и границ для дискретных задач оптимизации.

**Где читать в учебнике:**
*   **Стр. 237:** Общая идея метода (6.3.1).
*   **Стр. 240:** Схема ветвления (Рис 6.8).

**Суть:** Это метод **направленного перебора**. Мы разбиваем все множество вариантов на подмножества («ветви») и для каждого подмножества оцениваем, насколько хорошим может быть решение внутри него («границы»). Если оценка плохая — мы отрубаем эту ветку целиком, не проверяя её детально.

---

## 1. Идея метода (Объяснение на пальцах)

> [!example] Аналогия с поиском самого дешевого отеля
> Ты ищешь самый дешевый отель в мире.
> 1.  **Рекорд:** Ты уже нашел хостел за 50$. Это твой **текущий рекорд ($f^*$)**.
> 2.  **Ветвление:** Ты делишь мир на страны: «Франция», «Индия», «США».
> 3.  **Оценка границ:**
>     *   Смотрим на ветку «Франция». Ты знаешь, что минимальная цена в Париже — 80$.
>     *   Сравниваем с рекордом (50$).
>     *   **Отсечение:** Так как $80 > 50$, во Франции искать бесполезно. Мы вычеркиваем всю Францию целиком. Мы не проверяем каждый отель Парижа.
>     *   Смотрим на ветку «Индия». Оценка — 10$.
>     *   **Ветвление:** $10 < 50$, значит, там может быть что-то выгодное. Мы «заходим» в Индию и делим её на города...
>
> **Итог:** Мы экономим время, отбрасывая целые куски вариантов, которые заведомо хуже уже найденного.

---

## 2. Алгоритм (Ланда и Дойга)

Мы решаем задачу минимизации $f(x) \to \min, x \in Z$ (целые).

> [!info] Шаг 1. Релаксация (Снятие ограничений)
> Сначала решаем задачу, как будто переменные **не обязаны** быть целыми (обычное ЛП).
> Получаем решение $x_{relax}$.
> *   Если $x_{relax}$ случайно получилось целым — **Ура!** Это ответ.
> *   Если $x_{relax}$ дробное (например, $x_1 = 3.7$), переходим к ветвлению.

> [!info] Шаг 2. Ветвление (Branching)
> Выбираем переменную, которая получилась дробной (например, $x_1 = 3.7$).
> Целое число не может быть между 3 и 4.
> Разбиваем задачу на две подзадачи (ветви):
> 1.  **Левая ветка:** Добавляем ограничение $x_1 \le 3$.
> 2.  **Правая ветка:** Добавляем ограничение $x_1 \ge 4$.
>
> *(Мы "выкололи" дробную середину).*

> [!info] Шаг 3. Вычисление границ (Bounding)
> Для каждой новой ветки решаем непрерывную задачу ЛП.
> Полученное значение функции $f_{min}$ — это **нижняя граница** для этой ветки. Лучше (меньше) этого значения в этой ветке мы точно не найдем.

> [!info] Шаг 4. Отсечение (Pruning)
> Сравниваем нижнюю границу ветки с нашим **текущим рекордом** (лучшим найденным целым решением).
> *   Если $f_{branch} \ge f_{record}$, то эта ветка **бесперспективна**. Мы её закрываем (отсекаем).
> *   Если $f_{branch} < f_{record}$, продолжаем ветвление дальше, пока не найдем целое решение.

---

## 3. Численный пример (Дерево решений)

**Задача:** $f(x) = -x_1 - x_2 \to \min$ (Максимизируем сумму).
Ограничения такие, что непрерывный оптимум: $x_1 = 1.5, x_2 = 2.5$. Значение $f = -4$.

**Итерация 1 (Корень):**
Решение $(1.5, 2.5)$. Не целое.
Берем $x_1$. Ветвим:
1.  **Задача 1:** Исходная + $x_1 \le 1$.
2.  **Задача 2:** Исходная + $x_1 \ge 2$.

**Итерация 2 (Решаем Задачу 1):**
Получили, например, $x = (1, 2.8)$. $f = -3.8$.
Снова не целое. Ветвим по $x_2$:
*   **Задача 1.1:** $x_1 \le 1$ и $x_2 \le 2$.
*   **Задача 1.2:** $x_1 \le 1$ и $x_2 \ge 3$.

**Итерация 3 (Решаем Задачу 1.1):**
Решаем ЛП. Получили $x = (1, 2)$. Это **ЦЕЛОЕ** решение!
Значение $f = -3$.
Это наш **Рекорд**. Запоминаем: $f^* = -3$.

**Итерация 4 (Проверка остальных веток):**
Допустим, мы решили Задачу 2 (где $x_1 \ge 2$) и получили оценку $f = -2.5$ (значение -2.5 хуже, чем -3, так как мы минимизируем -4... стоп, для задачи на минимум -4 лучше).
*Коррекция:* Если мы ищем минимум, то рекорд -3. Если в другой ветке оценка -2.5 (это больше, хуже), мы её отсекаем. Если оценка -4 (лучше), мы копаем дальше.

В методе ветвей и границ мы постоянно сравниваем «Надежду» (оценку ветки) с «Реальностью» (текущим целым рекордом).

---

## 4. Навигация
<< [[Q24 - Дискретные задачи]] | [[00_ПЛАН_ПОДГОТОВКИ]] | [[Q26 - Целочисленное ЛП]] >>